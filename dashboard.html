<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard - Upload & Status</title>
<style>
body{font-family: Arial,sans-serif; background:#0c1515; color:white; display:flex; justify-content:center; padding:20px;}
.container{width:90%; max-width:800px; background:#1a1f22; padding:20px; border-radius:10px;}
input, button{padding:10px; margin:5px 0; border-radius:5px; border:none; width:100%;}
#statusList{margin-top:20px;}
.statusItem{margin-bottom:15px; border:1px solid #555; padding:10px; border-radius:5px;}
.statusItem img, .statusItem video{max-width:100%; border-radius:5px;}
</style>
</head>
<body>
<div class="container">
<h2>Upload Photo / Video</h2>
<form id="uploadForm">
<input type="file" id="fileInput" name="file" accept="image/*,video/*"/>
<button type="submit">Upload</button>
</form>

<h2>Status / Media</h2>
<div id="statusList"></div>
</div>

<script>
const form = document.getElementById('uploadForm');
const fileInput = document.getElementById('fileInput');
const statusList = document.getElementById('statusList');

form.onsubmit = async (e)=>{
  e.preventDefault();
  if(!fileInput.files.length) return alert("Select a file!");
  const formData = new FormData();
  formData.append('file', fileInput.files[0]);
  const res = await fetch('/upload', {method:'POST', body:formData});
  const data = await res.json();
  const ext = data.filePath.split('.').pop().toLowerCase();
  let el;
  if(['mp4','webm','ogg'].includes(ext)){
    el = document.createElement('video'); el.src=data.filePath; el.controls=true;
  } else {
    el = document.createElement('img'); el.src=data.filePath;
  }
  const div = document.createElement('div'); div.className='statusItem';
  div.appendChild(el);
  statusList.prepend(div);
}
</script>
</body>
</html>
